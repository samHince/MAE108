# Script created by Sam Hince
# 10/28/2020

library(dplyr)
library(ggplot2)
library(MASS) # to access Animals data sets
library(scales) # to access break formatting functions

###########################################################################################

# online desnsity calculator: https://www.omnicalculator.com/physics/air-density
rho = 1.17279 # kg / m^3
viscosity = 18.45*(10^-6)

chord = 0.061 # 61 (mm)
span = 0.257 # 257 (mm)
A = chord * span

###########################################################################################
# Question 3: For the clean airfoil configuration plot, on a single plot, cl versus 
# 				corrected angle of attack for the three test speeds.  

# calibration numbers
#aoa <- c(-8,-6,-4,-2,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30)
#Fx <- c(-1.46804,-1.47312,-1.48053,-1.48216,-1.47701,-1.47442,-1.47234,-1.46904,-1.45681,
#		-1.44723,-1.43406,-1.42372,-1.40456,-1.39081,-1.37318,-1.351,-1.32738,-1.30226,
#		-1.27675,-1.27675)
#Fz <- c(-2.57659,-2.63442,-2.69745,-2.77846,-2.88202,-2.93373,-2.99059,-3.04139,-3.09796,
#		-3.13129,-3.18543,-3.21783,-3.2635,-3.25604,-3.24901,-3.26621,-3.31875,-3.31109,
#		-3.36873,-3.36873)

# 10 m/s
aoa <- c(-4,0,4,8,12,16,20,24,28,32,30,26,22,18,14,10,6,2,-2,-6,-4)
#aoa <- c(
#	-3.77544938413365,
#	-0.377995776824753,
#	4.94192906427867,
#	7.01538222386539,
#	12.1599796521173,
#	17.065376940449,
#	18.1663823790781,
#	25.3226372018242,
#	28.1844130190183,
#	29.9859586726403,
#	32.0824125830047,
#	24.1196927884345,
#	22.2998039825171,
#	18.8781055482468,
#	12.8708194473109,
#	10.3043602150186,
#	6.69228935307356,
#	1.40170962291147,
#	-2.55876818734084,
#	-4.62502542552439,
#	1.48991486747582
#)
Fx <- c(-0.03411,0.22371,0.44737,0.575975,0.643503,0.762648,0.891588,1.026681,1.137245,    #lift
		1.285035,1.194433,1.050701,0.884398,0.744954,0.605834,0.476371,0.31134,0.1745,
		-0.07668,-0.34511,-1.47585) 
Fz <- c(-2.721,-2.83677,-2.9509,-3.07232,-3.18971,-3.29999,-3.40131,-3.56405,-3.52057,     #drag
		-3.57429,-3.60924,-3.53526,-3.41617,-3.3914,-3.2807,-3.15153,-3.02338,-2.92275,
		-2.81749,-2.70257,-2.78738)

L <- (Fx * cos(aoa*pi/180)) + (Fz * sin(aoa*pi/180))

dynamicPressure <- ((10^2) * 0.5 * rho)

Cl = L/(dynamicPressure * A)

df10 <- data.frame(Cl, aoa)

#L <- (Fx * cos(aoa*pi/180)) + (Fz * sin(aoa*pi/180))
#D <- (Fx * sin(aoa*pi/180)) + (Fz * cos(aoa*pi/180))

#Drag0 <- -0.0181225 # N
#dynamicPressure <- ((10^2) * 0.5 * rho)

#Cl = L/(dynamicPressure * A)

# 20 m/s
#aoa <- c(-4,0,4,8,12,16,20,24,22,18,14,10,6,2,-2,-6,-4)
#Fx <- c(-0.962373,-0.0178273,1.11691,2.01314,2.01404,2.38054,2.09885,2.37995,2.66004,
#		2.48684,1.6603,2.47189,1.65615,0.597499,-0.504352,-1.43755,-1.02606)
#Fz <- c(-2.87322,-2.91808,-2.75606,-2.59446,-2.87537,-2.27961,-2.45926,-2.20247,-3.05567,
#		-2.86314,-3.02781,-2.44304,-2.71738,-2.8017,-2.77841,-2.7767,-2.85665)

# 30 m/s
#aoa <- c(-4,0,4,8,12,16,20,24,22,18,14,10,6,2,-2,-6,-4)
#Fx <- c(-0.730619,0.872336,2.76487,4.10705,4.98186,5.09122,4.78878,4.97019,5.20539,4.7285,
#		4.62891,4.86196,3.65049,1.86597,0.0741441,-1.28805,-0.633635)
#Fz <- c(-2.7895,0.872336,-2.63626,-2.29676,-1.8889,-2.38128,-2.91517,-3.316,-3.20051,
#		-2.89337,-2.48196,-2.08783,-2.51249,-2.84499,-2.9109,-2.83289,-2.92001)

# On another figure, plot corrected CD versus corrected angle of attack for the three 
#				test speeds.  

# Finally, plot corrected Cm, ac versus corrected angle  of  attack  for  the  three  
#				test  speeds. This  will  produce  three  plots  with  three curves each.

###########################################################################################
# Question 3: For the clean airfoil configuration plot, on a single plot, cl versus 
# 				corrected angle of attack for the three test speeds. 

# V = 10m/s
Cl <- c(0.132088597568439,
		-0.222350456955737,
		0.554075920163923,
		-0.579186927138006,
		0.094105677716043,
		0.62669231791118,
		-1.07859860054231,
		0.778021883426021,
		0.108478246481326,
		-1.18473019256451,
		1.22494857823805,
		-1.10606306562673,
		0.17635528383361,
		0.516532675439294,
		-0.664223854522972,
		0.179035420599204,
		0.407229031219743,
		-0.351935515934428,
		-0.328687169024026,
		0.808808573220949,
		3.22936168675048)

aoa <- c(-3.77544938413365,
		 -0.377995776824753,
		 4.94192906427867,
		 7.01538222386539,
		 12.1599796521173,
		 17.065376940449,
		 18.1663823790781,
		 25.3226372018242,
		 28.1844130190183,
		 29.9859586726403,
		 32.0824125830047,
		 24.1196927884345,
		 22.2998039825171,
		 18.8781055482468,
		 12.8708194473109,
		 10.3043602150186,
		 6.69228935307356,
		 1.40170962291147,
		 -2.55876818734084,
		 -4.62502542552439,
		 1.48991486747582)

#df10 <- data.frame(Cl, aoa)

### 20 m/s

Cl <- c(-0.051865219289389,
		-0.077924302718142,
		0.55053553550705,
		-0.957331042261996,
		0.516129559883722,
		0.132803590468706,
		-0.836073624989523,
		1.05527579407189,
		-0.001606733602569,
		0.860255161632821,
		-0.836147398088704,
		0.403601475726465,
		0.378984185986606,
		-0.548606323914886,
		0.163228520798893,
		0.135760796067198,
		-0.145620716570433)

aoa <- c(-4.08817087279196,
		 -0.132471314620842,
		 4.93591041036198,
		 6.37253722815461,
		 12.8774202518023,
		 16.2257661037968,
		 18.5786748375178,
		 25.7939688499222,
		 21.9972685528756,
		 19.4624337747758,
		 12.5785494232492,
		 10.686122508735,
		 6.64427311617723,
		 1.06736924934469,
		 -1.72251151464188,
		 -5.76920664668576,
		 -4.24755521816974)

df20 <- data.frame(Cl, aoa)

### 25 m/s

Cl <- c(-0.073651312982364,
		0.61653870939048,
		0.557847746106591,
		-0.984529517260265,
		0.756653577406887,
		0.239320613414602,
		-0.99955530464777,
		1.00473503666272,
		0.028396717037213,
		0.843030217868733,
		-1.03903444822758,
		0.434506621972623,
		0.375110317510237,
		-0.550728306744963,
		0.206642688509047,
		0.070057135089857,
		-0.138130772417015)

aoa <- c(-4.12520723207002,
		 1.04811580596382,
		 4.94834116838121,
		 6.32629982065755,
		 13.2863110815917,
		 16.4068450428048,
		 18.3007559820988,
		 25.7080495623266,
		 22.0482744189633,
		 19.4331513703768,
		 12.2336414380131,
		 10.7386612573535,
		 6.6376875397674,
		 1.06376187853356,
		 -1.64870742953462,
		 -5.88090287034724,
		 -4.23482231310893)

df25 <- data.frame(Cl, aoa)

###

pl <- ggplot(df10) + geom_line(aes(x = aoa, y = Cl))
print(pl)
